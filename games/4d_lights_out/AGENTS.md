# 4D Lights Out — Agent Instructions

## Overview

Classic Lights Out puzzle on a 4D IVM (Isotropic Vector Matrix) grid. Clicking a cell toggles it and all its **12 IVM neighbors** (the "twelve around one" kissing-sphere topology — permutations of (0,1,1,2) in Quadray coordinates). Goal: turn all lights off in the fewest moves.

## Key Concepts

- **12-neighbor topology**: Each cell has up to 12 IVM neighbors, not the 8 axis-aligned directions. This is the true close-packed sphere geometry (Fuller, Synergetics §410).
- **Solvability**: Puzzles are generated by random toggles, guaranteeing a solution exists.
- **Score**: Lower move count = better. High scores track best (lowest) solutions.

## Architecture

| File | Class | Extends | Purpose |
|------|-------|---------|---------|
| `js/lights_out_board.js` | `LightsOutBoard` | `BaseBoard` | Grid state, toggle logic, win detection |
| `js/lights_out_renderer.js` | `LightsOutRenderer` | `BaseRenderer` | 3D-projected cell rendering with glow effects |
| `js/lights_out_game.js` | `LightsOutGame` | `BaseGame` | Click handling, HUD, ScoreManager |

## Commands

```bash
python3 ../../run_games.py --game lights_out              # Launch on port 8129
node tests/test_lights_out.js  # Run unit tests
```
